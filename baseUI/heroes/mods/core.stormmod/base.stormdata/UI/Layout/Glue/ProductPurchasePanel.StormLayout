<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<Desc>
    <DescFlags val="Locked"/>

    <Constant name="MaxProductListHeight" val="165"/>
    <Constant name="MaxWarningListHeight" val="100"/>

    <Frame type="Control" name="PriceTooLowIconTemplate">
        <Width val="72"/>
        <Height val="64"/>

        <Frame type="Image" name="Icon">
            <Anchor side="Bottom" relative="$parent" pos="Max" offset="0"/>
            <Anchor side="Right" relative="$parent" pos="Mid" offset="0"/>
            <Anchor side="Left" relative="$parent" pos="Mid" offset="0"/>
            <Texture val="@UI/Storm_Store_Warning_Icon"/>
        </Frame>

        <Animation name="Hover">
            <Event event="OnMouseEnter" action="DirectionForward,Play" frame="$this"/>
            <Event event="OnMouseExit" action="DirectionReverse,Play" frame="$this"/>
            <Controller type="Fade" end="Pause" frame="TooltipContainer">
                <Key type="Curve" time="0" value="0" inout="Linear"/>
                <Key type="Curve" time=".2" value="255" inout="Slow,Linear"/>
            </Controller>
        </Animation>

        <Frame type="Frame" name="TooltipContainer">
            <Anchor side="Left" relative="$parent/Icon" pos="Min" offset="0"/>
            <Anchor side="Bottom" relative="$parent/Icon" pos="Min" offset="-30"/>
            <Anchor side="Top" relative="BodyLabel" pos="Min" offset="0"/>
            <Width val="400"/>
            <VisibilityOnFade val="true"/>
            <Alpha val="0"/>

            <Frame type="Frame" name="TooltipBorder" template="StandardTooltip/ArrowedBorderTemplate">
                <Anchor relative="$parent/BodyLabel" offset="10"/>

                <Frame type="Image" name="PointerImage">
                    <Anchor side="Top" relative="$this" pos="Max" offset="0"/>
                    <Anchor side="Bottom" relative="$parent" pos="Max" offset="38"/>
                    <Anchor side="Right" relative="$parent" pos="Mid" offset="-162"/>
                    <Anchor side="Left" relative="$parent" pos="Mid" offset="-162"/>
                    <Texture val="@UI/Storm_UI_Tooltip_Universal_Arrow_Down"/>
                    <Width val="112"/>
                    <Height val="56"/>
                </Frame>
            </Frame>

            <Frame type="Label" name="BodyLabel">
                <Anchor side="Left" relative="$parent" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="0"/>
                <Anchor side="Bottom" relative="$parent" pos="Max" offset="0"/>
                <Style val="RankedBadge_Tooltip_Text"/>
                <Text val="@UI/ProductPurchase/PriceTooLowWarning"/>
                <Unclipped val="True"/>
            </Frame>
        </Frame>
    </Frame>

    <Frame type="Frame" name="PaymentBackgroundTemplate">
        
        <Frame type="BlurFrame" name="BackgroundBlur">
            <Anchor side="Top" relative="$parent/PurchasePanelBg" pos="Min" offset="5"/>
            <Anchor side="Left" relative="$parent/PurchasePanelBg" pos="Min" offset="5"/>
            <Anchor side="Right" relative="$parent/PurchasePanelBg" pos="Max" offset="-5"/>
            <Anchor side="Bottom" relative="$parent/PurchasePanelBg" pos="Max" offset="-5"/>
            <BlurAmount val="0.6"/>

            <Frame type="Image" name="LowImage">
                <Anchor relative="$parent"/>
                <Color val="17,25,50"/>
                <Alpha val="220"/>
            </Frame>
        </Frame>

        <Frame type="Image" name="PurchasePanelDarkBg">
            <Anchor side="Top" relative="$parent/PurchasePanelBg" pos="Min" offset="5"/>
            <Anchor side="Left" relative="$parent/PurchasePanelBg" pos="Min" offset="5"/>
            <Anchor side="Right" relative="$parent/PurchasePanelBg" pos="Max" offset="-5"/>
            <Anchor side="Bottom" relative="$parent/PurchasePanelBg" pos="Max" offset="-5"/>
            <LayerColor val="04030f"/>
            <Alpha val="150"/>
        </Frame>

        <Frame type="Image" name="PurchasePanelBg">
            <Anchor side="Top" relative="$parent" pos="Min" offset="0"/>
            <Anchor side="Bottom" relative="$parent" pos="Max" offset="0"/>
            <Anchor side="Left" relative="$parent" pos="Min" offset="0"/>
            <Anchor side="Right" relative="$parent" pos="Max" offset="0"/>
            <Texture val="@UI/Storm_UI_Store_PurchasePanelBorder"/>
            <TextureType val="Nineslice"/>
        </Frame>
    </Frame>

    <Frame type="ProductListBoxItem" name="ProductListBoxItemTemplate">
        <Frame type="Label" name="ProductNameLabel">
            <Anchor side="Top" relative="$parent" pos="Min" offset="0"/>
            <Anchor side="Left" relative="$parent" pos="Min" offset="0"/>
            <Style val="PurchaseFlowItemHeader"/>
        </Frame>

        <Frame type="Label" name="QuantityLabel">
            <Anchor side="Top" relative="$parent" pos="Min" offset="0"/>
            <Anchor side="Left" relative="$parent/$parent/$parent/$parent/QuantityHeaderLabel" pos="Min" offset="0"/>
            <Anchor side="Right" relative="$parent/$parent/$parent/$parent/QuantityHeaderLabel" pos="Max" offset="0"/>
            <Style val="PurchaseFlowItemHeaderCenter"/>
            <Text val="1"/>
        </Frame>
    </Frame>

    <Frame type="Label" name="ProductHeaderTemplate">
        <Anchor side="Top" relative="$parent" pos="Min" offset="0"/>
        <Anchor side="Left" relative="$parent" pos="Min" offset="0"/>
        <Height val="34"/>
        <Style val="PurchaseFlowProductHeader"/>
    </Frame>

    <Frame type="TextListBoxItem" name="WarningListBoxItemTemplate">
        <Frame type="Image" name="WarningIcon">
            <Anchor side="Top" relative="$parent" pos="Min" offset="0"/>
            <Anchor side="Left" relative="$parent" pos="Min" offset="20"/>
            <Texture val="@UI/Storm_Store_Warning_Icon"/>
            <Width val="44"/>
            <Height val="44"/>
        </Frame>

        <Frame type="Label" name="WarningTitleLabel">
            <Anchor side="Top" relative="$parent/WarningIcon" pos="Mid" offset="0"/>
            <Anchor side="Bottom" relative="$parent/WarningIcon" pos="Mid" offset="0"/>
            <Anchor side="Left" relative="$parent/WarningIcon" pos="Max" offset="-5"/>
            <Anchor side="Right" relative="$parent" pos="Max" offset="-25"/>
            <Text val="@UI/ProductPurchase/WarningTitle"/>
            <Style val="StoreWarningTitle"/>
        </Frame>

        <Frame type="Label" name="ItemLabel">
            <Anchor side="Top" relative="$parent/WarningTitleLabel" pos="Max" offset="5"/>
            <Anchor side="Left" relative="$parent" pos="Min" offset="30"/>
            <Anchor side="Right" relative="$parent" pos="Max" offset="-25"/>
            <Style val="StoreWarning"/>
            <AcceptsMouse val="true"/>
        </Frame>
    </Frame>

    <Frame type="ProductPurchasePanel" name="ProductPurchasePanelTemplate">
        <Width val="784"/>
        <Height val="598"/>
        <RenderType val="LDR"/>

        <Frame type="GameContentFrame" name="GameContentFrame">
            <Anchor relative="$parent"/>
            <GameContent val="{$parent/@GameContent}"/>
        </Frame>

        <Frame type="Frame" name="PaymentBackground" template="ProductPurchasePanel/PaymentBackgroundTemplate">
            <Anchor relative="$parent/CompletePurchasePanel"/>
        </Frame>

        <Frame type="Frame" name="SelectCurrencyPanel">
            <Anchor relative="$parent/CompletePurchasePanel"/>

            <Frame type="Button" name="SelectCurrencyGoldButton" template="StandardTemplates/StandardButtonSmallTemplate">
                <Anchor side="Top" relative="$parent" pos="Min" offset="0"/>
                <Anchor side="Left" relative="$parent" pos="Min" offset="0"/>
                <CollapseLayout val="true"/>
                <ReportsStats val="true"/>
            </Frame>

            <Frame type="Button" name="SelectCurrencyRealButton" template="StandardTemplates/StandardButtonSmallTemplate">
                <Anchor side="Top" relative="$parent/SelectCurrencyGoldButton" pos="Min" offset="0"/>
                <Anchor side="Left" relative="$parent/SelectCurrencyGoldButton" pos="Max" offset="-7"/>
                <CollapseLayout val="true"/>
                <ReportsStats val="true"/>
            </Frame>

            <Frame type="Button" name="CancelButton" template="StandardTemplates/StandardButtonSmallTemplate">
                <Anchor side="Top" relative="$parent/SelectCurrencyRealButton" pos="Min" offset="0"/>
                <Anchor side="Left" relative="$parent/SelectCurrencyRealButton" pos="Max" offset="-7"/>
                <Text val="@UI/ProductPurchase/CancelButton"/>
                <Shortcut val="@UI/ScreenNavigationBack_Hotkey"/>
                <ReportsStats val="true"/>
                <ClickSound val="@UI_BNet_Cancel"/>
            </Frame>
        </Frame>

        <Frame type="Frame" name="BeginPurchasePanel">
            <Anchor relative="$parent/CompletePurchasePanel"/>

            <Frame type="Image" name="IdleSpinner" template="StandardTemplates/IdleSpinnerTemplate">
                <Anchor side="Top" relative="$parent" pos="Mid" offset="0"/>
                <Anchor side="Bottom" relative="$parent" pos="Mid" offset="0"/>
                <Anchor side="Left" relative="$parent" pos="Mid" offset="0"/>
                <Anchor side="Right" relative="$parent" pos="Mid" offset="0"/>
            </Frame>
        </Frame>

        <Frame type="Frame" name="CompletePurchasePanel">
            <Anchor side="Top" relative="$parent" pos="Min" offset="0"/>
            <Anchor side="Left" relative="$parent" pos="Min" offset="0"/>
            <Anchor side="Right" relative="$parent" pos="Max" offset="0"/>
            <Anchor side="Bottom" relative="$parent" pos="Min" offset="598"/>
            <Alpha val="0"/>

            <Frame type="Label" name="ProductHeaderLabel" template="ProductPurchasePanel/ProductHeaderTemplate">
                <Anchor side="Top" relative="$parent" pos="Min" offset="35"/>
                <Anchor side="Left" relative="$parent" pos="Min" offset="39"/>
                <Width val="370"/>
                <Text val="@UI/ProductPurchase/Item"/>
            </Frame>

            <Frame type="Label" name="QuantityHeaderLabel">
                <Anchor side="Top" relative="$parent/ProductHeaderLabel" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="-44"/>
                <Width val="67"/>
                <Style val="PurchaseFlowProductHeaderCenter"/>
                <Text val="@UI/ProductPurchase/Quantity"/>
            </Frame>

            <Frame type="ListBox" name="ProductListBox">
                <Anchor side="Top" relative="$parent/ProductHeaderLabel" pos="Max" offset="11"/>
                <Anchor side="Left" relative="$parent/ProductHeaderLabel" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent/QuantityHeaderLabel" pos="Max" offset="10"/>
                <Height val="250"/>

                <ItemHeight val="33"/>
                <ItemDesc val="ProductPurchasePanel/ProductListBoxItemTemplate"/>
                <SelectedImage val="SelectedImage"/>
                <HoverImage val="HoverImage"/>
                <BackgroundImage val="BackgroundImage"/>
                <ScrollBar val="$root/StandardTemplates/StandardScrollBarTemplate"/>

                <Frame type="Image" name="SelectedImage">
                    <Alpha val="0"/>
                    <DescFlags val="Internal"/>
                </Frame>

                <Frame type="Image" name="HoverImage">
                    <Alpha val="0"/>
                    <DescFlags val="Internal"/>
                </Frame>

                <Frame type="Image" name="BackgroundImage">
                    <Alpha val="0"/>
                    <DescFlags val="Internal"/>
                </Frame>
            </Frame>

            <Frame type="Image" name="TotalBackground">
                <Anchor side="Top" relative="$parent/ProductListBox" pos="Max" offset="20"/>
                <Anchor side="Left" relative="$parent" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="0"/>
                <Anchor side="Bottom" relative="$parent/InputEditBox" pos="Max" offset="23"/>
                <Color val="111, 55, 255"/>
                <Alpha val="0"/>
            </Frame>

            <Frame type="Label" name="TotalHeaderLabel">
                <Anchor side="Top" relative="$parent/TotalBackground" pos="Min" offset="20"/>
                <Anchor side="Left" relative="$parent/ProductListBox" pos="Min" offset="0"/>
                <Width val="220"/>
                <Style val="PurchaseFlowTitle"/>
                <Text val="@UI/ProductPurchase/Total"/>
            </Frame>
            <Frame type="Label" name="PaymentMethodHeaderLabel">
                <Anchor side="Top" relative="$parent/TotalHeaderLabel" pos="Max" offset="18"/>
                <Anchor side="Left" relative="$parent/TotalHeaderLabel" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent/TotalHeaderLabel" pos="Max" offset="0"/>
                <Style val="PurchaseFlowTitle"/>
                <Text val="@UI/ProductPurchase/PaymentMethod"/>
            </Frame>

            <Frame type="Label" name="PayWithGoldLabel">
                <Anchor side="Left" relative="$parent/PaymentMethodPulldown" pos="Min" offset="10"/>
                <Anchor side="Bottom" relative="$parent/PaymentMethodHeaderLabel" pos="Max" offset="0"/>
                <Style val="PurchaseFlowValue"/>
                <Text val="@UI/ProductPurchase/GoldPurchase"/>
                <CollapseLayout val="true"/>
            </Frame>

            <Frame type="Pulldown" name="PaymentMethodPulldown" template="StandardTemplates/StandardPulldownTemplate">
                <Anchor side="Top" relative="$parent/PaymentMethodHeaderLabel" pos="Mid" offset="0"/>
                <Anchor side="Bottom" relative="$parent/PaymentMethodHeaderLabel" pos="Mid" offset="0"/>
                <Anchor side="Left" relative="$parent/PaymentMethodHeaderLabel" pos="Max" offset="0"/>
                <Height val="54"/>
                <Width val="320"/>
                <Style val="PurchaseFlowPulldown"/>

                <Frame type="Image" name="ArrowImage">
                    <Anchor side="Right" relative="$parent" pos="Max" offset="-15"/>
                </Frame>

                <Frame type="Image" name="ArrowHoverImage">
                    <Anchor side="Right" relative="$parent" pos="Max" offset="-15"/>
                </Frame>

                <Frame type="Frame" name="ItemContainer">
                    <Anchor side="Top" relative="$parent" pos="Min" offset="12"/>
                    <Anchor side="Left" relative="$parent" pos="Min" offset="20"/>
                    <Anchor side="Bottom" relative="$parent" pos="Max" offset="-10"/>
                    <Anchor side="Right" relative="$parent" pos="Max" offset="-50"/>
                </Frame>
            </Frame>

            <Frame type="Label" name="TotalLabel">
                <Anchor side="Left" relative="$parent/PayWithGoldLabel" pos="Min" offset="0"/>
                <Anchor side="Bottom" relative="$parent/TotalHeaderLabel" pos="Max" offset="0"/>
                <Style val="PurchaseFlowValue"/>

                <StateGroup name="RepositionForRealCurrency">
                    <State name="NotRealCurrency">
                        <When type="Property" frame="$parent/$parent" IsRealCurrency="false"/>
                        <Action type="SetAnchor" frame="$this" side="Left" relative="$parent/PayWithGoldLabel" pos="Min" offset="-6"/>
                    </State>
                </StateGroup>
            </Frame>

            <Frame type="Image" name="TotalPriceTooltip">
                <Width val="55"/>
                <Height val="55"/>
                <Anchor side="Top" relative="$parent/TotalLabel" pos="Mid" offset="0"/>
                <Anchor side="Bottom" relative="$parent/TotalLabel" pos="Mid" offset="0"/>
                <Anchor side="Left" relative="$parent/TotalLabel" pos="Max" offset="5"/>
                <Tooltip val="@UI/ProductPurchase/InstructionTooltip"/>
                <Texture val="@UI/TooltipInfoIcon"/>
                <AcceptsMouse val="true"/>

                <StateGroup name="TotalPriceTooltipCurrencyState">
                    <State name="RealMoney">
                        <When type="Property" frame="$parent/$parent" IsRealCurrency="True"/>
                        <Action type="SetProperty" Tooltip="@UI/ProductPurchase/InstructionTooltip"/>
                    </State>

                    <State name="Gems">
                        <When type="Property" frame="$parent/$parent" SelectedCurrency="XHC"/>
                        <Action type="SetProperty" Tooltip="@UI/ProductPurchase/InstructionTooltipGem"/>
                    </State>

                    <State name="Gold">
                        <When type="Property" frame="$parent/$parent" SelectedCurrency="XHG"/>
                        <Action type="SetProperty" Tooltip="@UI/ProductPurchase/InstructionTooltipGold"/>
                    </State>

                    <State name="Shard">
                        <When type="Property" frame="$parent/$parent" SelectedCurrency="XHS"/>
                        <Action type="SetProperty" Tooltip="@UI/ProductPurchase/InstructionTooltipShard"/>
                    </State>

                </StateGroup>
                    
            </Frame>

            <Frame type="Label" name="TaxesIncludedLabel">
                <Anchor side="Top" relative="$parent/TotalPriceTooltip" pos="Mid" offset="0"/>
                <Anchor side="Bottom" relative="$parent/TotalPriceTooltip" pos="Mid" offset="0"/>
                <Anchor side="Left" relative="$parent/TotalPriceTooltip" pos="Max" offset="5"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="-10"/>
                <Style val="PurchaseFlowAside"/>
                <Text val="@UI/ProductPurchase/TaxesIncluded"/>
            </Frame>

            <Frame type="Label" name="ErrorLabel">
                <Anchor side="Top" relative="$parent/PaymentMethodPulldown" pos="Max" offset="10"/>
                <Anchor side="Left" relative="$parent/PaymentMethodHeaderLabel" pos="Min" offset="0"/>
                <Style val="UserErrorDisplay"/>
            </Frame>

            <Frame type="Label" name="InputLabel">
                <Anchor side="Top" relative="$parent/InputEditBox" pos="Mid" offset="0"/>
                <Anchor side="Bottom" relative="$parent/InputEditBox" pos="Mid" offset="0"/>
                <Anchor side="Left" relative="$parent/PaymentMethodHeaderLabel" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent/PaymentMethodHeaderLabel" pos="Max" offset="0"/>
                <Style val="PurchaseFlowTitle"/>
            </Frame>

            <Frame type="EditBox" name="InputEditBox" template="StandardTemplates/StandardEditBoxTemplate">
                <Anchor side="Top" relative="$parent/ErrorLabel" pos="Max" offset="10"/>
                <Anchor side="Left" relative="$parent/InputLabel" pos="Max" offset="0"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="-50"/>
                <Width val="0"/>
                <CollapseLayout val="true"/>

                <Frame type="Label" name="SearchTextLabel">
                    <Anchor side="Top" relative="$parent" pos="Min" offset="15"/>
                    <Anchor side="Bottom" relative="$parent" pos="Max" offset="-12"/>
                    <Anchor side="Left" relative="$parent" pos="Min" offset="20"/>
                    <Anchor side="Right" relative="$parent" pos="Max" offset="-15"/>
                    <Style val="StandardEditBoxLabel"/>
                    <Options val="Ellipsis | NoWrapping | TooltipIfTruncated"/>
                    <AcceptsMouseTooltip val="true"/>
                </Frame>
            </Frame>

            <Frame type="Frame" name="CheckboxShim">
                <Anchor side="Top" relative="$parent/InputEditBox" pos="Max" offset="5"/>
                <Anchor side="Left" relative="$parent/InputLabel" pos="Min" offset="-5"/>
            </Frame>

            <Frame type="CheckBox" name="TermsOfSaleCheckBox" template="StandardTemplates/StandardCheckBoxLabelTemplate">
                <Anchor side="Bottom" relative="$parent/TermsOfSaleLabel" pos="Min" offset="0"/>
                <Anchor side="Left" relative="$parent/CheckboxShim" pos="Min" offset="0"/>
                <Width val="700"/>
                <Height val="75"/>
                <CollapseLayout val="true"/>

                <Frame type="Label" name="Label">
                    <Anchor side="Right" relative="$parent" pos="Max" offset="-10"/>
                    <Style val="PurchaseFlowCheckboxLabel"/>
                    <Text val="@UI/ProductPurchase/TermsOfSale"/>
                    <AcceptsMouse val="true"/>
                    <Options val="TooltipIfTruncated"/>
                </Frame>
            </Frame>

            <Frame type="Frame" name="ProductRatingFrame">
                <Anchor side="Bottom" relative="$parent" pos="Max" offset="0"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="0"/>
                <Width val="95"/>
                <Height val="105"/>

                <Frame type="Label" name="ProductRatingHeaderLabel">
                    <Anchor side="Top" relative="$parent" pos="Min" offset="0"/>
                    <Anchor side="Left" relative="$parent" pos="Min" offset="0"/>
                    <Style val="PurchaseFlowRatingDescription"/>
                    <Text val="@UI/ProductPurchase/ProductRatingHeader"/>
                </Frame>

                <Frame type="Image" name="ProductRatingImage">
                    <Anchor side="Top" relative="$parent/ProductRatingHeaderLabel" pos="Max" offset="0"/>
                    <Anchor side="Left" relative="$parent/ProductRatingHeaderLabel" pos="Mid" offset="0"/>
                    <Anchor side="Right" relative="$parent/ProductRatingHeaderLabel" pos="Mid" offset="0"/>
                    <Width val="56"/>
                    <Height val="56"/>
                    <Color val="00ccff"/>
                </Frame>


                <Frame type="Label" name="ProductRatingLabel">
                    <Anchor side="Top" relative="$parent/ProductRatingImage" pos="Mid" offset="2"/>
                    <Anchor side="Bottom" relative="$parent/ProductRatingImage" pos="Mid" offset="2"/>
                    <Anchor side="Left" relative="$parent/ProductRatingImage" pos="Mid" offset="2"/>
                    <Anchor side="Right" relative="$parent/ProductRatingImage" pos="Mid" offset="2"/>
                    <Style val="PurchaseFlowRating"/>
                    <Text val="10"/>
                </Frame>
                <Frame type="Label" name="ProductRatingDescriptionLabel">
                    <Anchor side="Top" relative="$parent/ProductRatingImage" pos="Max" offset="0"/>
                    <Anchor side="Left" relative="$parent/ProductRatingImage" pos="Mid" offset="0"/>
                    <Anchor side="Right" relative="$parent/ProductRatingImage" pos="Mid" offset="0"/>
                    <Style val="PurchaseFlowRatingDescription"/>
                    <Text val="@UI/ProductPurchase/ProductRatingDescription"/>
                </Frame>
            </Frame>

            <Frame type="Label" name="TermsOfSaleLabel">
                <Anchor side="Bottom" relative="$parent/AdditionalLegalTextLabel" pos="Min" offset="-5"/>
                <Anchor side="Left" relative="$parent/ProductHeaderLabel" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="-20"/>
                <Text val="@UI/ProductPurchase/TermsOfSale"/>
                <Style val="PurchaseFlowAside"/>
                <CollapseLayout val="true"/>
                <AcceptsMouse val="true"/>
            </Frame>

            <Frame type="Label" name="AdditionalLegalTextLabel">
                <Anchor side="Bottom" relative="$parent/BundleLegalTextLabel" pos="Min" offset="-5"/>
                <Anchor side="Left" relative="$parent/TermsOfSaleLabel" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent/TermsOfSaleLabel" pos="Max" offset="0"/>
                <Style val="PurchaseFlowAside"/>
                <CollapseLayout val="true"/>
                <Text val="@UI/ProductPurchase/AdditionalLegalText"/>
            </Frame>
            
            <Frame type="Label" name="BundleLegalTextLabel">
                <Anchor side="Bottom" relative="$parent/DropRateDisclosureLabel" pos="Min" offset="-5"/>
                <Anchor side="Left" relative="$parent/AdditionalLegalTextLabel" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent/AdditionalLegalTextLabel" pos="Max" offset="0"/>
                <Style val="PurchaseFlowAside"/>
                <CollapseLayout val="true"/>
                <Text val="@UI/ProductPurchase/BundleLegalText"/>
            </Frame>

            <Frame type="Label" name="DropRateDisclosureLabel">
                <Anchor side="Bottom" relative="$parent/ConfirmButton" pos="Min" offset="8"/>
                <Anchor side="Left" relative="$parent/BundleLegalTextLabel" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent/BundleLegalTextLabel" pos="Max" offset="0"/>
                <Text val="@UI/ProductPurchase/LootChestDropRateDisclosureLink"/>
                <Style val="PurchaseFlowAside"/>
                <CollapseLayout val="true"/>
                <AcceptsMouse val="true"/>
            </Frame>

            <Frame type="Frame" name="LegalTextSpan">
                <Anchor side="Top" relative="$parent/TermsOfSaleLabel" pos="Min" offset="0"/>
                <Anchor side="Bottom" relative="$parent/DropRateDisclosureLabel" pos="Max" offset="0"/>
                <Anchor side="Left" relative="$parent/TermsOfSaleLabel" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent/TermsOfSaleLabel" pos="Max" offset="0"/>
                <Visible val="false"/>
            </Frame>

            <Frame type="Control" name="PriceLowWarningIcon" template="ProductPurchasePanel/PriceTooLowIconTemplate">
                <Anchor side="Top" relative="$parent/PaymentMethodPulldown" pos="Mid" offset="0"/>
                <Anchor side="Bottom" relative="$parent/PaymentMethodPulldown" pos="Mid" offset="0"/>
                <Anchor side="Left" relative="$parent/PaymentMethodPulldown" pos="Max" offset="5"/>
                <Visible val="{$ancestor[@type=ProductPurchasePanel]/@ShowMinimumPriceWarning}"/>
            </Frame>

            <Frame type="Button" name="ConfirmButton" template="StandardTemplates/StandardButtonTemplate">
                <Anchor side="Bottom" relative="$parent" pos="Max" offset="-10"/>
                <Anchor side="Left" relative="$parent/ProductHeaderLabel" pos="Min" offset="-25"/>
                <ReportsStats val="true"/>
                <Handle val="CompletePurchasePanel_ConfirmButton"/>
                <Text val="@UI/ProductPurchase/ConfirmButton"/>
                <Width val="318"/>

                <StateGroup name="ButtonTextState">
                    <DefaultState val="NotShard"/>
                    <State name="Shard">
                        <When type="Property" frame="$parent/$parent" SelectedCurrency="XHS"/>
                        <Action type="SetProperty" Text="@UI/ProductPurchase/ConfirmButtonShard"/>
                    </State>

                    <State name="NotShard">
                        <Action type="SetProperty" Text="@UI/ProductPurchase/ConfirmButton"/>
                    </State>
                </StateGroup>
            </Frame>

            <Frame type="Button" name="CancelButton" template="StandardTemplates/StandardButtonTemplate">
                <Anchor side="Top" relative="$parent/ConfirmButton" pos="Min" offset="0"/>
                <Anchor side="Left" relative="$parent/ConfirmButton" pos="Max" offset="-30"/>
                <ReportsStats val="true"/>
                <Handle val="CompletePurchasePanel_CancelButton"/>
                <Text val="@UI/ProductPurchase/CancelButton"/>
                <Shortcut val="@UI/ScreenNavigationBack_Hotkey"/>
                <ClickSound val="@UI_BNet_Cancel"/>
                <Width val="318"/>
            </Frame>

            <Animation name="ToggleVisibility">
                <Event event="OnShown" action="Reset,Play" frame="$parent"/>
                <Event event="OnHidden" action="Reset,DirectionReverse,Play" frame="$parent"/>
                <Controller type="Fade" end="Pause">
                    <Key type="Curve" time="0" value="0" inout="Linear"/>
                    <Key type="Curve" time=".5" value="0" inout="Linear"/>
                    <Key type="Curve" time="1" value="255" inout="Linear"/>
                </Controller>
            </Animation>

            <StateGroup name="TermsOfSaleVisibility">
                <DefaultState val="NotVisible"/>

                <State name="PurchaseFailed">
                    <When type="Property" frame="$parent" PurchaseStep="Failed"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox" Visible="False"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Visible="False"/>
                </State>

                <State name="KRProductExpires">
                    <When type="Property" frame="$parent" AccountCountry="KOR"/>
                    <When type="Property" frame="$parent" DoesProductExpire="True"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox" Visible="True"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox/Label" Text="@UI/ProductPurchase/TermsOfSaleKRExpires"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Visible="False"/>
                </State>

                <State name="KRProductGemPack">
                    <When type="Property" frame="$parent" AccountCountry="KOR"/>
                    <When type="Property" frame="$parent/GameContentFrame" ContentType="GemPack"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox" Visible="True"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox/Label" Text="@UI/ProductPurchase/TermsOfSaleKRGemPack"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Visible="False"/>
                </State>

                <State name="KRProductUsingGems">
                    <When type="Property" frame="$parent" AccountCountry="KOR"/>
                    <When type="Property" frame="$parent" SelectedCurrency="XHC"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox" Visible="True"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox/Label" Text="@UI/ProductPurchase/TermsOfSaleKRUsingGems"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Visible="False"/>
                </State>

                <State name="KRProductDoesntExpire">
                    <When type="Property" frame="$parent" AccountCountry="KOR"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox" Visible="True"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox/Label" Text="@UI/ProductPurchase/TermsOfSaleKR"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Visible="False"/>
                </State>

                <State name="RealCurrency_EUR">
                    <When type="Property" frame="$parent" SelectedCurrency="EUR"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox" Visible="False"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Text="@UI/ProductPurchase/EuTermsOfSale"/>
                </State>

                <State name="RealCurrency_GBP">
                    <When type="Property" frame="$parent" SelectedCurrency="GBP"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox" Visible="False"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Text="@UI/ProductPurchase/EuTermsOfSale"/>
                </State>

                <State name="RealCurrency_RUB">
                    <When type="Property" frame="$parent" SelectedCurrency="RUB"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox" Visible="False"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Text="@UI/ProductPurchase/EuTermsOfSale"/>
                </State>

                <State name="RealCurrency">
                    <When type="Property" frame="$parent" IsRealCurrency="True"/>
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox" Visible="False"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Text="@UI/ProductPurchase/TermsOfSale"/>
                </State>

                <State name="NotVisible">
                    <Action type="SetProperty" frame="TermsOfSaleCheckBox" Visible="False"/>
                    <Action type="SetProperty" frame="TermsOfSaleLabel" Visible="False"/>
                </State>
            </StateGroup>

            <StateGroup name="AdditionalLegalTextVisibility">
                <DefaultState val="NotVisible"/>

                <State name="PurchaseFailed">
                    <When type="Property" frame="$parent" PurchaseStep="Failed"/>
                    <Action type="SetProperty" frame="AdditionalLegalTextLabel" Visible="False"/>
                </State>

                <State name="KRProductExpires">
                    <When type="Property" frame="$parent" AccountCountry="KOR"/>
                    <When type="Property" frame="$parent" DoesProductExpire="True"/>
                    <Action type="SetProperty" frame="AdditionalLegalTextLabel" Visible="True"/>
                    <Action type="SetProperty" frame="AdditionalLegalTextLabel" Text="@UI/ProductPurchase/AdditionalLegalTextKRExpires"/>
                </State>

                <State name="KRProduct">
                    <When type="Property" frame="$parent" AccountCountry="KOR"/>
                    <Action type="SetProperty" frame="AdditionalLegalTextLabel" Visible="True"/>
                    <Action type="SetProperty" frame="AdditionalLegalTextLabel" Text="@UI/ProductPurchase/AdditionalLegalTextKR"/>
                </State>

                <State name="TaiwanCurrency">
                    <When type="Property" frame="$parent" SelectedCurrency="NT$"/>
                    <Action type="SetProperty" frame="AdditionalLegalTextLabel" Visible="True"/>
                    <Action type="SetProperty" frame="AdditionalLegalTextLabel" Text="@@UI/ProductPurchase/AdditionalLegalTextTW"/>
                </State>

                <State name="BRACurrency">
                    <When type="Property" frame="$parent" SelectedCurrency="BRL"/>
                    <Action type="SetProperty" frame="AdditionalLegalTextLabel" Visible="True"/>
                    <Action type="SetProperty" frame="AdditionalLegalTextLabel" Text="@@UI/ProductPurchase/AdditionalLegalText"/>
                </State>

                <State name="NotVisible">
                    <Action type="SetProperty" frame="AdditionalLegalTextLabel" Visible="False"/>
                </State>
            </StateGroup>

            <StateGroup name="BundleLegalTextVisibility">
                <DefaultState val="NotVisible"/>

                <State name="PurchaseFailed">
                    <When type="Property" frame="$parent" PurchaseStep="Failed"/>
                    <Action type="SetProperty" frame="BundleLegalTextLabel" Visible="False"/>
                </State>

                <State name="Bundle_KOR">
                    <When type="Property" frame="$parent" AccountCountry="KOR"/>
                    <When type="Property" frame="$parent" IsProductBundle="True"/>
                    <Action type="SetProperty" frame="BundleLegalTextLabel" Visible="True"/>
                </State>

                <State name="NotVisible">
                    <Action type="SetProperty" frame="BundleLegalTextLabel" Visible="False"/>
                </State>
            </StateGroup>

            <StateGroup name="DropRateDisclosureVisibility">
                <DefaultState val="NotVisible"/>
            
                <State name="KRLootBoxDisclosure">
                    <When type="Property" frame="$BattleUI" TargetRegion="KR"/>
                    <When type="Property" frame="$parent" HasLootChest="True"/>
                    <Action type="SetProperty" frame="DropRateDisclosureLabel" Visible="True"/>
                </State>
            
                <State name="NotVisible">
                    <Action type="SetProperty" frame="DropRateDisclosureLabel" Visible="False"/>
                </State>
            </StateGroup>

            <StateGroup name="TaxesIncludedVisibility">
                <DefaultState val="NotVisible"/>

                <State name="PurchaseFailed">
                    <When type="Property" frame="$parent" PurchaseStep="Failed"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="False"/>
                </State>

                <State name="VATIncluded_KOR">
                    <When type="Property" frame="$parent" AccountCountry="KOR"/>
                    <When type="Property" frame="$parent" IsRealCurrency="True"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Text="@UI/ProductPurchase/KoVATIncluded"/>
                </State>

                <State name="VATIncluded_EUR">
                    <When type="Property" frame="$parent" SelectedCurrency="EUR"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Text="@UI/ProductPurchase/EuVATIncluded"/>
                </State>

                <State name="VATIncluded_RUB">
                    <When type="Property" frame="$parent" SelectedCurrency="RUB"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Text="@UI/ProductPurchase/EuVATIncluded"/>
                </State>

                <State name="VATIncluded_GBP">
                    <When type="Property" frame="$parent" SelectedCurrency="GBP"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Text="@UI/ProductPurchase/EuVATIncluded"/>
                </State>

                <State name="TaxesIncluded_ARS">
                    <When type="Property" frame="$parent" SelectedCurrency="ARS"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Text="@UI/ProductPurchase/TaxesIncluded"/>
                </State>

                <State name="TaxesIncluded_CLP">
                    <When type="Property" frame="$parent" SelectedCurrency="CLP"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Text="@UI/ProductPurchase/TaxesIncluded"/>
                </State>

                <State name="TaxesIncluded_MXN">
                    <When type="Property" frame="$parent" SelectedCurrency="MXN"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Text="@UI/ProductPurchase/TaxesIncluded"/>
                </State>

                <State name="TaxesExcluded_USD">
                    <When type="Property" frame="$parent" SelectedCurrency="USD"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Text="@UI/ProductPurchase/TaxesExcluded"/>
                </State>

                <State name="TaxesExcluded_BRL">
                    <When type="Property" frame="$parent" SelectedCurrency="BRL"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="True"/>
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Text="@UI/ProductPurchase/TaxesExcluded"/>
                </State>

                <State name="NotVisible">
                    <Action type="SetProperty" frame="TaxesIncludedLabel" Visible="False"/>
                </State>
            </StateGroup>
        
            <StateGroup name="ProductRatingFrameVisibility">
                <DefaultState val="ProductRatingFrameNotVisible"/>
                
                <State name="PurchaseFailed">
                    <When type="Property" frame="$parent" PurchaseStep="Failed"/>
                    <Action type="SetProperty" frame="ProductRatingFrame" Visible="False"/>
                </State>

                <State name="ProductRating_BRA">
                    <When type="Property" frame="$parent" AccountCountry="BRA"/>
                    <Action type="SetProperty" frame="ProductRatingFrame" Visible="True"/>
                </State>

                <State name="ProductRatingFrameNotVisible">
                    <Action type="SetProperty" frame="ProductRatingFrame" Visible="False"/>
                </State>
            </StateGroup>
        </Frame>

        <Frame type="Frame" name="PurchasedPanel">
            <Anchor relative="$parent/CompletePurchasePanel"/>

            <Frame type="Label" name="PurchaseCompleteTitle">
                <Anchor side="Top" relative="$parent" pos="Min" offset="35"/>
                <Anchor side="Left" relative="$parent" pos="Min" offset="39"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="-39"/>
                <Style val="PurchaseFlowCompleteTitle" />
                <Text val="@UI/ProductPurchase/CompleteTitle"/>
            </Frame>

            <Frame type="Label" name="PurchaseCompleteLabel">
                <Anchor side="Top" relative="$parent/PurchaseCompleteTitle" pos="Max" offset="10"/>
                <Anchor side="Left" relative="$parent/PurchaseCompleteTitle" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent/PurchaseCompleteTitle" pos="Max" offset="0"/>
                <Style val="PurchaseFlowProductHeader" />
                <Text val="@UI/ProductPurchase/CompleteSuccess"/>
            </Frame>

            <Frame type="Button" name="BackButton" template="StandardTemplates/StandardButtonTemplate">
                <Anchor side="Bottom" relative="$parent" pos="Max" offset="-10"/>
                <Anchor side="Left" relative="$parent/PurchaseCompleteLabel" pos="Min" offset="-25"/>
                <Shortcut val="@UI/ScreenNavigationBack_Hotkey"/>
                <Text val="@UI/Close"/>
            </Frame>
        </Frame>

        <Frame type="Frame" name="ErrorPanel">
            <Anchor relative="$parent/CompletePurchasePanel"/>

            <Frame type="Label" name="ErrorTextLabel">
                <Anchor side="Top" relative="$parent" pos="Min" offset="35"/>
                <Anchor side="Left" relative="$parent" pos="Min" offset="39"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="-39"/>
                <Style val="PurchaseFlowProductHeader" />
            </Frame>

            <Frame type="Button" name="ExternalButton" template="StandardTemplates/StandardButtonSmallTemplate">
                <Anchor side="Top" relative="$parent" pos="Mid" offset="0"/>
                <Anchor side="Bottom" relative="$parent" pos="Mid" offset="0"/>
                <Anchor side="Left" relative="$parent" pos="Min" offset="10"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="-10"/>
                <Width val="0"/>
            </Frame>

            <Frame type="Label" name="ExternalTextLabel">
                <Anchor side="Top" relative="$parent/ExternalButton" pos="Max" offset="0"/>
                <Anchor side="Left" relative="$parent" pos="Mid" offset="0"/>
                <Anchor side="Right" relative="$parent" pos="Mid" offset="0"/>
                <Style val="PurchaseFlowAside"/>
                <AcceptsMouse val="true"/>
            </Frame>

            <Frame type="Button" name="RetryButton" template="StandardTemplates/StandardButtonTemplate">
                <Anchor side="Bottom" relative="$parent" pos="Max" offset="-10"/>
                <Anchor side="Left" relative="$parent" pos="Min" offset="10"/>
                <Width val="320"/>
                <Text val="@UI/ProductPurchase/RetryButton"/>
                <CollapseLayout val="true"/>
            </Frame>

            <Frame type="Button" name="BackButton" template="StandardTemplates/StandardButtonTemplate">
                <Anchor side="Bottom" relative="$parent" pos="Max" offset="-10"/>
                <Anchor side="Left" relative="$parent" pos="Min" offset="10"/>
                <Width val="320"/>
                <Text val="@UI/ProductPurchase/BackButton"/>
                <Visible val="false"/>
            </Frame>

            <Frame type="Button" name="CancelButton" template="StandardTemplates/StandardButtonTemplate">
                <Anchor side="Top" relative="$parent/RetryButton" pos="Min" offset="0"/>
                <Anchor side="Left" relative="$parent/RetryButton" pos="Max" offset="-30"/>
                <Width val="320"/>
                <Text val="@UI/ProductPurchase/CancelButton"/>
            </Frame>
        </Frame>

        <Frame type="Frame" name="WarningPanel">
            <Anchor side="Top" relative="$parent/PaymentBackground" pos="Max" offset="-5"/>
            <Anchor side="Left" relative="$parent/PaymentBackground" pos="Min" offset="-5"/>
            <Anchor side="Right" relative="$parent/PaymentBackground" pos="Max" offset="5"/>
            <Anchor side="Bottom" relative="BottomBuffer" pos="Max" offset="10"/>
            <Height val="0"/>
            <CollapseLayout val="true"/>

            <Frame type="BlurFrame" name="BackgroundBlur">
                <Anchor side="Top" relative="$parent/Background" pos="Min" offset="10"/>
                <Anchor side="Left" relative="$parent/Background" pos="Min" offset="10"/>
                <Anchor side="Right" relative="$parent/Background" pos="Max" offset="-10"/>
                <Anchor side="Bottom" relative="$parent/Background" pos="Max" offset="-10"/>
                <BlurAmount val="0.6"/>

                <Frame type="Image" name="LowImage">
                    <Anchor relative="$parent"/>
                    <Color val="17,25,50"/>
                    <Alpha val="220"/>
                </Frame>
            </Frame>

            <Frame type="Image" name="Background">
                <Anchor relative="$parent"/>
                <Texture val="@UI/Storm_Store_Warning_Background"/>
                <TextureType val="Nineslice"/>
            </Frame>

            <Frame type="Image" name="HexImage">
                <Anchor side="Top" relative="$parent" pos="Min" offset="12"/>
                <Anchor side="Left" relative="$parent" pos="Min" offset="12"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="-12"/>
                <Texture val="@UI/Storm_Store_Warning_Hex"/>
            </Frame>

            <Frame type="ListBox" name="WarningListBox">
                <Anchor side="Top" relative="$parent" pos="Min" offset="20"/>
                <Anchor side="Left" relative="$parent" pos="Min" offset="0"/>
                <Anchor side="Right" relative="$parent" pos="Max" offset="-10"/>
                <Height val="150"/>

                <ItemHeight val="0"/>
                <ItemDesc val="ProductPurchasePanel/WarningListBoxItemTemplate"/>
                <SelectedImage val="SelectedImage"/>
                <HoverImage val="HoverImage"/>
                <BackgroundImage val="BackgroundImage"/>
                <ScrollBar val="$root/StandardTemplates/StandardScrollBarTemplate"/>

                <Frame type="Image" name="SelectedImage">
                    <Alpha val="0"/>
                    <DescFlags val="Internal"/>
                </Frame>

                <Frame type="Image" name="HoverImage">
                    <Alpha val="0"/>
                    <DescFlags val="Internal"/>
                </Frame>

                <Frame type="Image" name="BackgroundImage">
                    <Alpha val="0"/>
                    <DescFlags val="Internal"/>
                </Frame>
            </Frame>

            <Frame type="Image" name="BottomBuffer">
                <Anchor side="Top" relative="$parent/WarningListBox" pos="Max" offset="0"/>
                <Anchor side="Left" relative="$parent/WarningListBox" pos="Min" offset="0"/>
                <Alpha val="0"/>
                <Height val="20"/>
            </Frame>
        </Frame>

        <Frame type="PurchaseRewardPanel" name="PurchaseRewardPanel" template="StoreTemplates/PurchaseRewardPanelTemplate">
            <Anchor side="Top" relative="$parent/WarningPanel" pos="Max" offset="-45"/>
            <Anchor side="Bottom" relative="MountRewardImage" pos="Max" offset="0"/>
            <Anchor side="Left" relative="$parent" pos="Min" offset="-71"/>
            <Anchor side="Right" relative="$parent" pos="Max" offset="0"/>

            <StateGroup name="PurchaseRewardVisibility">
                <DefaultState val="NotVisible"/>

                <State name="PurchaseFailed">
                    <When type="Property" frame="$parent" PurchaseStep="Failed"/>
                    <Action type="SetProperty" Visible="False"/>
                </State>

                <State name="RewardAvailable">
                    <When type="Property" frame="$parent" IsRealCurrency="True"/>
                    <When type="AnimationState" FirstPurchaseRewardState="RewardAvailable"/>
                    <Action type="SetProperty" Visible="False"/>
                </State>

                <State name="NotVisible">
                    <Action type="SetProperty" Visible="False"/>
                </State>
            </StateGroup>
        </Frame>

        <StateGroup name="PayWithCurrencyGroup">
            <DefaultState val="RealCurrency"/>
            <State name="Gems">
                <When type="Property" SelectedCurrency="XHC"/>
                <Action type="SetProperty" frame="CompletePurchasePanel/PayWithGoldLabel" Text="@UI/ProductPurchase/GemsPurchase"/>
                <Action type="SetProperty" frame="CompletePurchasePanel/PayWithGoldLabel" Visible="True"/>
                <Action type="SetProperty" frame="CompletePurchasePanel/PaymentMethodPulldown" Visible="False"/>
            </State>

            <State name="Gold">
                <When type="Property" SelectedCurrency="XHG"/>
                <Action type="SetProperty" frame="CompletePurchasePanel/PayWithGoldLabel" Text="@UI/ProductPurchase/GoldPurchase"/>
                <Action type="SetProperty" frame="CompletePurchasePanel/PayWithGoldLabel" Visible="True"/>
                <Action type="SetProperty" frame="CompletePurchasePanel/PaymentMethodPulldown" Visible="False"/>
            </State>

            <State name="Shards">
                <When type="Property" SelectedCurrency="XHS"/>
                <Action type="SetProperty" frame="CompletePurchasePanel/PayWithGoldLabel" Text="@UI/ProductPurchase/ShardsPurchase"/>
                <Action type="SetProperty" frame="CompletePurchasePanel/PayWithGoldLabel" Visible="True"/>
                <Action type="SetProperty" frame="CompletePurchasePanel/PaymentMethodPulldown" Visible="False"/>
            </State>

            <State name="RealCurrency">
                <Action type="SetProperty" frame="CompletePurchasePanel/PayWithGoldLabel" Visible="False"/>
                <Action type="SetProperty" frame="CompletePurchasePanel/PaymentMethodPulldown" Visible="True"/>
            </State>

        </StateGroup>
    </Frame>

    <Frame type="Frame" name="MaintenanceWarningPanelTemplate">
        <Width val="600"/>
        <Height val="900"/>
        <Visible val="false"/>

        <Frame type="Image" name="BackgroundFill">
            <Anchor side="Top" relative="$parent/Background" pos="Min" offset="10"/>
            <Anchor side="Left" relative="$parent/Background" pos="Min" offset="10"/>
            <Anchor side="Right" relative="$parent/Background" pos="Max" offset="-10"/>
            <Anchor side="Bottom" relative="$parent/Background" pos="Max" offset="-10"/>
            <LayerColor val="000000"/>
            <Alpha val="200"/>
        </Frame>

        <Frame type="Image" name="Background">
            <Anchor side="Top" relative="$parent" pos="Min" offset="0"/>
            <Anchor side="Left" relative="$parent" pos="Min" offset="0"/>
            <Anchor side="Right" relative="$parent" pos="Max" offset="0"/>
            <Anchor side="Bottom" relative="$parent/BreakingNewsListBox" pos="Max" offset="30"/>
            <Texture val="@UI/Storm_Store_Warning_Background"/>
            <TextureType val="Nineslice"/>
        </Frame>

        <Frame type="Image" name="HexImage">
            <Anchor side="Top" relative="$parent" pos="Min" offset="12"/>
            <Anchor side="Left" relative="$parent" pos="Min" offset="12"/>
            <Anchor side="Right" relative="$parent" pos="Max" offset="-12"/>
            <Texture val="@UI/Storm_Store_Warning_Hex"/>
        </Frame>

        <Frame type="Image" name="WarningIcon">
            <Anchor side="Top" relative="$parent/Background" pos="Min" offset="10"/>
            <Anchor side="Left" relative="$parent/Background" pos="Min" offset="10"/>
            <Texture val="@UI/Storm_Store_Warning_Icon"/>
        </Frame>

        <Frame type="Label" name="MaintenanceWarningTitle">
            <Anchor side="Top" relative="$parent/WarningIcon" pos="Min" offset="18"/>
            <Anchor side="Left" relative="$parent/WarningIcon" pos="Max" offset="-5"/>
            <Anchor side="Right" relative="$parent/Background" pos="Max" offset="-25"/>
            <Text val="@UI/ProductPurchase/MaintenanceWarningTitle"/>
            <Style val="StoreWarningTitle"/>
        </Frame>

        <Frame type="Label" name="MaintenanceWarningLabel">
            <Anchor side="Top" relative="$parent/MaintenanceWarningTitle" pos="Max" offset="15"/>
            <Anchor side="Left" relative="$parent/Background" pos="Min" offset="30"/>
            <Anchor side="Right" relative="$parent/Background" pos="Max" offset="-25"/>
            <Text val="@UI/ProductPurchase/MaintenanceWarning"/>
            <Style val="StoreWarning"/>
        </Frame>

        <Frame type="Label" name="BreakingNewsTitle">
            <Anchor side="Top" relative="$parent/MaintenanceWarningLabel" pos="Max" offset="15"/>
            <Anchor side="Left" relative="$parent/MaintenanceWarningLabel" pos="Min" offset="0"/>
            <Anchor side="Right" relative="$parent/MaintenanceWarningLabel" pos="Max" offset="0"/>
            <Text val="@UI/ProductPurchase/BreakingNewsTitle"/>
            <Style val="MaintenanceWarningSubtitle"/>
        </Frame>

        <Frame type="ListBox" name="BreakingNewsListBox">
            <Anchor side="Top" relative="$parent/BreakingNewsTitle" pos="Max" offset="15"/>
            <Anchor side="Left" relative="$parent/MaintenanceWarningLabel" pos="Min" offset="0"/>
            <Anchor side="Right" relative="$parent/MaintenanceWarningLabel" pos="Max" offset="0"/>
            <Height val="500"/>
            <ScrollBar val="$root/StandardTemplates/StandardScrollBarTemplate"/>
        </Frame>

        <Animation name="ToggleVisibility">
            <Event event="OnShown" action="Reset,Play" frame="$parent"/>
            <Event event="OnHidden" action="Reset,DirectionReverse,Play" frame="$parent"/>
            <Controller type="Fade" end="Pause">
                <Key type="Curve" time="0" value="0" inout="Linear"/>
                <Key type="Curve" time=".5" value="0" inout="Linear"/>
                <Key type="Curve" time="1" value="255" inout="Linear"/>
            </Controller>
        </Animation>
    </Frame>
</Desc>
